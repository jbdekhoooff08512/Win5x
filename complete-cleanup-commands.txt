# Complete Server Cleanup Commands
# Copy and paste these commands one by one on your server

# 1. Connect to server
ssh -p 6579 root@217.148.142.91

# 2. Stop and delete all PM2 processes
pm2 stop all
pm2 delete all
pm2 kill

# 3. Disable PM2 startup
pm2 unstartup

# 4. Stop Nginx
systemctl stop nginx
systemctl disable nginx

# 5. Remove Nginx configuration
rm -rf /etc/nginx/sites-available/win5x*
rm -rf /etc/nginx/sites-enabled/win5x*
rm -rf /etc/nginx/conf.d/win5x*

# 6. Stop and remove Redis
systemctl stop redis
systemctl disable redis
rm -rf /var/lib/redis
rm -rf /etc/redis

# 7. Stop database services
systemctl stop postgresql
systemctl stop mysql
systemctl disable postgresql
systemctl disable mysql

# 8. Remove database data
rm -rf /var/lib/postgresql
rm -rf /var/lib/mysql

# 9. Remove project directories
rm -rf /var/www/win5x
rm -rf /var/www/kart

# 10. Remove logs
rm -rf /var/log/win5x*
rm -rf /var/log/kart*

# 11. Kill any remaining processes
pkill -f "win5x"
pkill -f "kart"
pkill -f "node.*8080"
pkill -f "node.*8081"
pkill -f "node.*8082"

# 12. Clean up system
apt-get autoremove -y
apt-get autoclean

# 13. Remove cron jobs
crontab -r

# 14. Remove systemd services
rm -f /etc/systemd/system/win5x*
rm -f /etc/systemd/system/kart*
systemctl daemon-reload

echo "Complete cleanup finished!"
